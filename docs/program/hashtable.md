---

title: 哈希表

meta:

  - name: description

    content: 数据结构查找之哈希表

  - name: keywords

    content: 页面关键词（为了SEO）

date: 2019-12-03

update_date: 2019-12-04
 
tags: 

  - 数据结构

banner: '/haha.png'

copyright: 博文版权，默认：允许转载，需保留原文链接，著作权归博主所有

password: false

---

![思维导图](https://s2.ax1x.com/2019/11/13/MYGpod.jpg)

## 一、基本概念
### 1. 哈希函数：在记录的关键字与记录的存储地址之间建立的一种对应关系。哈希表：应用哈希函数，由记录的关键字确定记录在表中的地址，并将其放入此地址构成的表。
### 2. 哈希查找（散列查找）：利用哈希函数进行查找的过程。
### 3. 冲突：对于不同的关键字ki、kj，若ki≠kj，但H(ki)=H(kj)的现象叫冲突。
### 4. 同义词：具有相同函数值的两个不同的关键字，称为该哈希函数的同义词。



## 二、哈希表的构造

### 1. 哈希表应包括：
#### (1) 哈希表的空间范围，即确定哈希函数的值域；
#### (2) 构造合适的哈希函数——使得对于所有可能的元素（记录的关键字），函数值均在哈希表的地址空间范围内，且出现冲突的可能最小。
#### (3) 处理冲突的方法。

### 2. 哈希函数的构造
#### (1) “好坏”的主要评价因素有： a.哈希函数构造简单； b.能“均匀”地将散列表中的关键字映射到地址空间，所谓“均匀”是指发生冲突的可能性最小。
#### (2) 直接定址法
取关键字或关键字的某个线性函数作哈希地址，即H(key)=key 或者 H(key)=a\*key+b (a,b为常数)
##### Tips：所得地址集合与关键字集合大小相等，不会发生冲突，但实际很少使用。
#### (3) 数字分析法
对关键字进行分析，取关键字的若干位或组合作为哈希地址。
##### Tips：适用于关键字位数比哈希地址位数大，且可能出现的关键字事先知道的情况。
Eg. 设有80个记录，关键字为8位十进制数，哈希地址为2位十进制数。
#### (4) 平方取中法
将关键字平方后取中间几位（由散列表的长度决定）作为哈希地址。
一个数平方后中间几位和数的每一位都有关，则由随机分布的关键字得到的散列地址也是随机的。
##### Tips：适用于不知道全部关键字的情况，较为常用。
#### (5) 折叠法
将关键字分割成位数相同的几部分（最后一部分可以不同），然后取这几部分的叠加和作为哈希地址。
数位叠加有移位叠加（将分割后的几部分低位对齐相加）和间界叠加（从一端到另一端沿分割界来回折迭，然后对齐相加）两种。
##### Tips：适用于关键字位数很多，且每一位上数字分布大致均匀的情况。
#### (6) 除留余数法🔔
取关键字被某个不大于哈希表表长m的数p除后所得的余数作为哈希地址，即H(key)=key MOD p (p≤m)
⭐p的选取：
a. 选取p=(2的i次方)(p<=m):运算便于用移位来实现，但等于将关键字的高位忽略而仅留下低位二进制数。高位不同而低位相同的关键字是同义词。
b. 选取p=q\*f(q、f都是质因数，p≤m)：则所有含有q或者f因子的关键字的散列地址均是q或者f的倍数。
c. 📙选取p为素数或p=q\*f(q、f是质数且均大于20，p<=m)：常用的选取方法，能减少冲突出现的可能性。
##### Tips：简单、常用 
#### (7) 随机数法
取关键字的随机函数值作为哈希地址，即H(key)=random(key)
##### Tips：适用于散列表中关键字长度不等的情况。

### 3. 选取哈希函数需考虑的因素
#### (1) 计算哈希函数所需时间；
#### (2) 关键字的长度；
#### (3) 哈希表的长度（哈希地址范围）；
#### (4) 关键字分布情况；
#### (5) 记录的查找频率。



## 三、处理冲突的办法
### 冲突处理：当出现冲突时，为冲突元素找到另一个存储位置。

### 1. 开放定址法
#### 当冲突发生时，形成某个探测序列；按此序列逐个探测散列表中的其他地址，直到找到给定的关键字或一个空地址（开放的地址）为止，将发生冲突的记录放到该地址中。散列表的计算公式是：
Hi(key)= (H(key)+di) MOD m, i=(……)
di：第i次探测时的增量序列；
Hi(key)：经第i次探测后得到的散列地址。
##### (1) 线性探测法
##### 增量序列为：di=1,2,3,……,m-1
##### Tips：优点：只要散列表未满，总能找到一个不冲突的散列地址；缺点：每个产生冲突的记录被散列到离冲突最近的空地址上，从而增加了更多的冲突机会（这种现象称为冲突的“聚集”）。
##### (2) 二次探测法
##### 增量序列为：di=1²，-1²，2²，-2²，……，±k² (k≤[m/2])
##### Tips：优点：探测序列跳跃式地分布到整个表中，不易产生冲突的“聚集”现象；缺点：不能保证探测到散列表的所有地址。
##### (3) 伪随机探测法
##### 增量序列：使用一个伪随机函数来产生一个落在闭区间[1,m-1]的随机序列。

### 2. 再哈希法
#### 构造若干个哈希函数，当发生冲突时，利用不同的哈希函数再计算下一个新哈希地址，直到不发生冲突为止。即Hi=RHi(key)  i=1,2,...,k
##### Tips: 优点：不易产生冲突的“聚集”现象；缺点：计算时间增加。

### 3. 链地址法
#### 将所有关键字为同义词（散列地址相同）的记录存储在一单链表中，并用一维数组存放链表的头指针 RecNode \*linkhash[m] ，其中RecNode是结点类型，每个分量的初值为空。
##### Tips: 优点：不易产生冲突的“聚集”；删除记录也简单。

### 4. 建立公共溢出区
#### 在基本散列表之外，另外设立一个溢出表保存与基本表中记录冲突的所有记录。设基本散列表为hashtable[m]，每个分量保存一个记录；溢出表overtable[m]，一旦某个记录的散列地址发生冲突，都填入溢出表中。



## 四、哈希查找与分析
### 1. 哈希查找过程
{% iframe https://s2.ax1x.com/2019/11/13/MYVkHf.png %}
### 2.哈希查找分析
#### 由于“冲突”，查找过程仍是一个给定值与关键字进行比较的过程，评价哈希查找效率仍要用到ASL。
#### 比较次数取决于：
##### (1) 哈希函数；
##### (2) 处理冲突的方法；
##### (3) 哈希表的装填因子α。α=表中填入的记录数哈希表的长度。α越小，发生冲突的可能性越小。